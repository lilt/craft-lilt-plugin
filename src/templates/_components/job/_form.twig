{% import '_includes/forms' as forms %}

<form method="post" id="create-job-form" accept-charset="UTF-8" action="{{ formActionUrl }}">
    {{ csrfInput() }}

    {% if element %}
        {{ forms.textField({
            name: 'jobId',
            id: 'jobId',
            value: element.id,
            class: 'hidden'
        }) }}
    {% endif %}

    {{ forms.textField({
        label: 'Job title <span class="required"/>'|t,
        placeholder: 'Translation job title',
        name: 'title',
        id: 'title',
        value: element.title ?? '',
        errors: model is defined and model ? model.getErrors('title'),
        maxlength: 255,
        errors: element.getErrors('title'),
        disabled: (constant('STATUS_IN_PROGRESS', element) is same as element.getStatus())
    }) }}

    {{ forms.selectField({
        label: 'Source site <span class="required"/>',
        options: availableSites,
        name: 'sourceSite',
        id: 'sourceSite',
        value: element.sourceSiteId ?? '',
        errors: element.getErrors('sourceSiteId'),
        disabled: (constant('STATUS_IN_PROGRESS', element) is same as element.getStatus())
    }) }}

    {{ forms.dateField({
        status: element.getAttributeStatus('dueDate'),
        label: "Due Date"|t('app'),
        id: 'dueDate',
        name: 'dueDate',
        value: (element.dueDate ? element.dueDate : null),
        errors: element.getErrors('dueDate'),
        disabled: (constant('STATUS_IN_PROGRESS', element) is same as element.getStatus())
    }) }}

    {{ forms.checkboxSelectField({
        label: 'Target site(s) <span class="required"/>',
        options: targetSites,
        values: element.getTargetSiteIds,
        showAllOption: true,
        name: 'targetSiteIds',
        id: 'targetSiteIds',
        errors: element.getErrors('targetSiteIds'),
        disabled: (constant('STATUS_IN_PROGRESS', element) is same as element.getStatus())
    }) }}


    <div id="entries-to-translate-field" class="field">
        <div class="heading">
            {{ forms.textField({
                label: 'Entries <span class="required"/>'|t,
                name: 'entries',
                id: 'create-job-selected-entries',
                class: 'create-job-selected-entries hidden',
                value: element.getElementIdsAsString ?? '',
                errors: model is defined and model ? model.getErrors('title'),
                maxlength: 255,
                errors: element.getErrors('elementIds'),
            }) }}
        </div>
        <div class="content-pane" id="entries-to-translate" style="display: none; margin-top: 20px">
            <div style="display: none">
                {% include '_elements/toolbar' with {
                    showSiteMenu: false,
                } %}
            </div>
            <div class="main">
                <div class="elements"></div>
            </div>

            <div id="toolbar-element-index" class="flex flex-nowrap"></div>
        </div>

        <div class="flex">
            <div class="submit">
                {% if(constant('STATUS_IN_PROGRESS', element) is same as element.getStatus()) %}
                    <button type="button" class="btn add icon dashed disabled">{{ 'Add an entry'|t }}</button>
                {% endif %}
                {% if(constant('STATUS_IN_PROGRESS', element) is not same as element.getStatus()) %}
                    <button type="button" class="btn add icon dashed addAnEntry">{{ 'Add an entry'|t }}</button>
                {% endif %}
            </div>
            <div id="entries-remove-action" class="btn" style="visibility: hidden;float:right">
                Remove
            </div>
        </div>
    </div>

</form>